{"ast":null,"code":"import _slicedToArray from\"/home/lucas/lucas/gopress/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useAuth}from\"../../../contexts/AuthContext\";import FormSignIn from\"../../../components/form/FormSignIn\";import{Link}from\"react-router-dom\";import{AuthRouteName}from\"../../../routes/AuthRouteName\";import{me,signIn}from\"../../../services/auth\";import{setTokenAuthorization}from\"../../../helpers/authToken\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SignIn=function SignIn(){var _useAuth=useAuth(),setUser=_useAuth.setUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),alert=_useState4[0],setAlert=_useState4[1];function login(value,action){setLoading(true);signIn(value).then(function(res){setTokenAuthorization(res.data.token);me().then(function(res){action.resetForm();setUser(res.data);}).finally(function(){setLoading(false);});}).catch(function(err){console.log(err);setAlert(err.response.data.message);setLoading(false);});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column justify-content-center align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[\"Welcome to \",/*#__PURE__*/_jsx(\"span\",{className:\"text-primary\",children:\"GoPress\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h4 mb-3\",children:\"Sign In\"})]}),alert&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-primary\",children:alert}),/*#__PURE__*/_jsx(FormSignIn,{onSubmit:login,loading:loading}),/*#__PURE__*/_jsx(Link,{to:AuthRouteName.REGISTER,className:\"btn btn-white btn-block\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-primary\",children:\"Register\"})})]});};export default SignIn;","map":{"version":3,"sources":["/home/lucas/lucas/gopress/src/pages/auth/signIn/SignIn.tsx"],"names":["React","useState","useAuth","FormSignIn","Link","AuthRouteName","me","signIn","setTokenAuthorization","SignIn","setUser","loading","setLoading","alert","setAlert","login","value","action","then","res","data","token","resetForm","finally","catch","err","console","log","response","message","REGISTER"],"mappings":"gJACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAEA,OAASC,OAAT,KAAwB,+BAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,qCAAvB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,aAAT,KAA8B,+BAA9B,CACA,OAASC,EAAT,CAAaC,MAAb,KAA2B,wBAA3B,CACA,OAASC,qBAAT,KAAsC,4BAAtC,C,6IAEA,GAAMC,CAAAA,MAAgB,CAAG,QAAnBA,CAAAA,MAAmB,EAAM,cACTP,OAAO,EADE,CACrBQ,OADqB,UACrBA,OADqB,eAECT,QAAQ,CAAC,KAAD,CAFT,wCAEtBU,OAFsB,eAEbC,UAFa,8BAGHX,QAAQ,CAAC,EAAD,CAHL,yCAGtBY,KAHsB,eAGfC,QAHe,eAK7B,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAA6BC,MAA7B,CAA2D,CACzDL,UAAU,CAAC,IAAD,CAAV,CACAL,MAAM,CAACS,KAAD,CAAN,CACGE,IADH,CACQ,SAACC,GAAD,CAAS,CACbX,qBAAqB,CAACW,GAAG,CAACC,IAAJ,CAASC,KAAV,CAArB,CACAf,EAAE,GACCY,IADH,CACQ,SAACC,GAAD,CAAS,CACbF,MAAM,CAACK,SAAP,GACAZ,OAAO,CAACS,GAAG,CAACC,IAAL,CAAP,CACD,CAJH,EAKGG,OALH,CAKW,UAAM,CACbX,UAAU,CAAC,KAAD,CAAV,CACD,CAPH,EAQD,CAXH,EAYGY,KAZH,CAYS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAX,QAAQ,CAACW,GAAG,CAACG,QAAJ,CAAaR,IAAb,CAAkBS,OAAnB,CAAR,CACAjB,UAAU,CAAC,KAAD,CAAV,CACD,CAhBH,EAiBD,CAED,mBACE,wCACE,aAAK,SAAS,CAAC,8DAAf,wBACE,aAAK,SAAS,CAAC,MAAf,sCACa,aAAM,SAAS,CAAC,cAAhB,qBADb,GADF,cAIE,YAAK,SAAS,CAAC,SAAf,qBAJF,GADF,CAOGC,KAAK,eAAI,YAAK,SAAS,CAAC,qBAAf,UAAsCA,KAAtC,EAPZ,cAQE,KAAC,UAAD,EAAY,QAAQ,CAAEE,KAAtB,CAA6B,OAAO,CAAEJ,OAAtC,EARF,cASE,KAAC,IAAD,EAAM,EAAE,CAAEN,aAAa,CAACyB,QAAxB,CAAkC,SAAS,CAAC,yBAA5C,uBACE,YAAK,SAAS,CAAC,cAAf,sBADF,EATF,GADF,CAeD,CAzCD,CA2CA,cAAerB,CAAAA,MAAf","sourcesContent":["import { FormikHelpers } from \"formik\";\nimport React, { useState } from \"react\";\nimport { IUser } from \"../../../alias/IUser\";\nimport { useAuth } from \"../../../contexts/AuthContext\";\nimport FormSignIn from \"../../../components/form/FormSignIn\";\nimport { Link } from \"react-router-dom\";\nimport { AuthRouteName } from \"../../../routes/AuthRouteName\";\nimport { me, signIn } from \"../../../services/auth\";\nimport { setTokenAuthorization } from \"../../../helpers/authToken\";\n\nconst SignIn: React.FC = () => {\n  const { setUser } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState(\"\");\n\n  function login(value: IUser, action: FormikHelpers<IUser>) {\n    setLoading(true);\n    signIn(value)\n      .then((res) => {\n        setTokenAuthorization(res.data.token);\n        me()\n          .then((res) => {\n            action.resetForm();\n            setUser(res.data);\n          })\n          .finally(() => {\n            setLoading(false);\n          });\n      })\n      .catch((err) => {\n        console.log(err);\n        setAlert(err.response.data.message);\n        setLoading(false);\n      });\n  }\n\n  return (\n    <>\n      <div className=\"d-flex flex-column justify-content-center align-items-center\">\n        <div className=\"mb-2\">\n          Welcome to <span className=\"text-primary\">GoPress</span>\n        </div>\n        <div className=\"h4 mb-3\">Sign In</div>\n      </div>\n      {alert && <div className=\"alert alert-primary\">{alert}</div>}\n      <FormSignIn onSubmit={login} loading={loading} />\n      <Link to={AuthRouteName.REGISTER} className=\"btn btn-white btn-block\">\n        <div className=\"text-primary\">Register</div>\n      </Link>\n    </>\n  );\n};\n\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}